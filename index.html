<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø­Ø¯ÙŠÙ‚Ø© Ø§Ù„Ù†Ø´Ø§Ø·Ø§Øª Ø§Ù„Ø·Ù„Ø§Ø¨ÙŠØ© - Ø¬Ø§Ù…Ø¹Ø© Ø§Ù„Ø£Ù†Ø¨Ø§Ø±</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap');

        body { font-family: 'Tajawal', sans-serif; }
        html { scroll-behavior: smooth; }

        /* Animations */
        .modal-animate { animation: modalPop 0.3s ease-out forwards; }
        @keyframes modalPop {
            from { opacity: 0; transform: scale(0.95) translateY(10px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #16a34a; border-radius: 10px; }

        /* Custom Map Pin */
        .custom-pin { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -100%); z-index: 20; pointer-events: none; }
        .pin-shape { width: 40px; height: 40px; border-radius: 50% 50% 50% 0; background: #ef4444; position: relative; transform: rotate(-45deg); border: 3px solid white; box-shadow: 0 4px 10px rgba(0,0,0,0.3); }
        .pin-shape::after { content: ""; width: 14px; height: 14px; background: white; position: absolute; border-radius: 50%; top: 50%; left: 50%; transform: translate(-50%, -50%); }
        .pin-pulse { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 20px; height: 20px; background: rgba(239, 68, 68, 0.4); border-radius: 50%; z-index: 10; animation: pulse-ring 1.5s infinite; }
        @keyframes pulse-ring { 0% { transform: translate(-50%, -50%) scale(0.3); opacity: 1; } 80%, 100% { transform: translate(-50%, -50%) scale(2.5); opacity: 0; } }

        /* Gallery Styles */
        .gallery-card {
            border: 1px solid rgba(22,163,74,.18);
            background: rgba(255,255,255,.85);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,.05);
            transition: transform .2s ease, box-shadow .2s ease;
            aspect-ratio: 1/1;
            position: relative;
        }
        .gallery-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 25px rgba(0,0,0,.1);
            z-index: 10;
        }
        .gallery-thumb {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        .gallery-card:hover .gallery-thumb { transform: scale(1.1); }

        /* Custom Scroll inside modal */
        .custom-scrollbar::-webkit-scrollbar { width: 8px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #16a34a; border-radius: 10px; }

        /* Before/After - Drag on image */
        .ba-stage { touch-action: none; cursor: ew-resize; user-select: none; }
        .after-image { transition: clip-path 0.12s ease-out; }
        .slider-handle { transition: left 0.12s ease-out; }
    </style>
</head>

<body onload="initApp();" class="bg-gray-50 text-gray-800">

<div id="app" class="min-h-screen flex flex-col relative">

    <div class="sticky top-0 z-50 w-full">
        <header class="bg-gradient-to-r from-green-600 to-green-700 text-white shadow-lg relative z-20">
            <div class="container mx-auto px-4 py-4">
                <div class="flex items-center justify-center gap-4">
                    <div class="w-14 h-14 bg-white rounded-full flex items-center justify-center shadow-md shrink-0">
                        <i data-lucide="leaf" class="text-green-600 w-8 h-8"></i>
                    </div>
                    <div class="text-center">
                        <h1 class="text-xl md:text-2xl font-bold">Ø­Ø¯ÙŠÙ‚Ø© Ø§Ù„Ù†Ø´Ø§Ø·Ø§Øª Ø§Ù„Ø·Ù„Ø§Ø¨ÙŠØ©</h1>
                        <p class="text-green-100 text-sm">ÙƒÙ„ÙŠØ© Ø¹Ù„ÙˆÙ… Ø§Ù„Ø­Ø§Ø³ÙˆØ¨ - Ø¬Ø§Ù…Ø¹Ø© Ø§Ù„Ø£Ù†Ø¨Ø§Ø±</p>
                    </div>
                </div>
            </div>
        </header>

        <nav class="bg-white shadow-md relative z-10 overflow-x-auto border-t border-green-600/20">
            <div class="container mx-auto px-4">
                <div id="nav-tabs" class="flex justify-start md:justify-center gap-2 py-3 min-w-max"></div>
            </div>
        </nav>
    </div>

    <main class="container mx-auto px-4 py-8 flex-grow">

        <!-- HOME -->
        <div id="home" class="space-y-8 hidden">
            <div class="relative rounded-2xl overflow-hidden shadow-2xl h-80 md:h-96">
                <img src="https://i.imgur.com/YIvddc1.jpg" class="w-full h-full object-cover" alt="Ø§Ù„Ø­Ø¯ÙŠÙ‚Ø©">
                <div class="absolute inset-0 bg-gradient-to-t from-black/80 to-transparent flex items-end p-8">
                    <div>
                        <h2 class="text-3xl md:text-5xl font-bold text-white">ÙˆØ§Ø­Ø© Ø§Ù„Ù…Ø¹Ø±ÙØ© Ø§Ù„Ø®Ø¶Ø±Ø§Ø¡</h2>
                        <p class="text-white/90 mt-2">Ù†Ø¨Ø§ØªØ§ØªÙ†Ø§ Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© Ø¨Ø¹Ù†Ø§ÙŠØ© Ù„ØªÙ†Ø§Ø³Ø¨ Ø¨ÙŠØ¦ØªÙ†Ø§ Ø§Ù„Ø¬Ø§Ù…Ø¹ÙŠØ©</p>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-2xl p-6 shadow-xl border border-green-100 text-center">
                <h3 class="text-2xl font-bold text-green-700 flex items-center justify-center gap-3 mb-6">
                    <i data-lucide="video" class="w-7 h-7"></i> ÙÙŠØ¯ÙŠÙˆ Ù…Ø±Ø§Ø­Ù„ Ø§Ù„ØªØ£Ù‡ÙŠÙ„
                </h3>

                <div class="relative overflow-hidden rounded-2xl border-4 border-green-50 bg-black mx-auto w-full max-w-[300px]" style="aspect-ratio: 9/16;">
                    <iframe class="absolute inset-0 w-full h-full"
                            src="https://www.youtube-nocookie.com/embed/ITPQTXG-eSg?rel=0&playsinline=1"
                            title="ÙÙŠØ¯ÙŠÙˆ Ù…Ø±Ø§Ø­Ù„ Ø§Ù„ØªØ£Ù‡ÙŠÙ„"
                            frameborder="0"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                            allowfullscreen>
                    </iframe>
                </div>
            </div>

            <div class="bg-white rounded-2xl p-6 shadow-xl">
                <h3 class="text-2xl font-bold text-green-700 mb-4 flex items-center gap-3">
                    <i data-lucide="map" class="w-7 h-7"></i>Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
                </h3>
                <div class="relative aspect-video w-full rounded-xl overflow-hidden border-2 border-gray-100">
                    <iframe src="https://maps.google.com/maps?ll=33.40319202995753,43.25935297872681&z=19&t=k&output=embed"
                            width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
                    <div class="custom-pin"><div class="pin-shape"></div><div class="pin-pulse"></div></div>
                </div>
                <p class="text-center mt-4 text-gray-600 font-medium">ğŸ“ Ø¬Ø§Ù…Ø¹Ø© Ø§Ù„Ø£Ù†Ø¨Ø§Ø± - ÙˆØ³Ø· ÙƒÙ„ÙŠØ© Ø¹Ù„ÙˆÙ… Ø§Ù„Ø­Ø§Ø³ÙˆØ¨</p>
            </div>
        </div>

        <!-- PLANTS -->
        <div id="plants" class="space-y-6 hidden">
            <div class="flex items-center gap-3">
                <i data-lucide="sprout" class="text-green-600 w-8 h-8"></i>
                <h2 class="text-3xl font-bold text-green-700">Ù…ÙˆØ³ÙˆØ¹Ø© Ø§Ù„Ù†Ø¨Ø§ØªØ§Øª</h2>
            </div>
            <div id="plants-container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"></div>
        </div>

        <!-- BEFORE AFTER (FIXED / NO DUPLICATE IDS) -->
        <div id="beforeafter" class="space-y-6 hidden">
            <h2 class="text-3xl font-bold text-green-700 flex items-center gap-2">
                <i data-lucide="scan" class="w-7 h-7"></i> Ù‚Ø¨Ù„ ÙˆØ¨Ø¹Ø¯ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
            </h2>

            <div class="grid gap-6">

                <!-- Ù…Ù‚Ø§Ø±Ù†Ø© 1 -->
                <div class="beforeafter-card bg-white rounded-2xl p-4 sm:p-6 shadow-lg border border-green-100">
                    <div class="flex items-center justify-end gap-2 mb-4 text-xs font-bold">
                        <span class="px-3 py-1 rounded-full bg-green-50 border border-green-200 text-green-800">Ù‚Ø¨Ù„</span>
                        <span class="px-3 py-1 rounded-full bg-white border border-green-200 text-green-800">Ø¨Ø¹Ø¯</span>
                    </div>

                    <div class="ba-stage relative w-full h-72 sm:h-80 md:h-96 overflow-hidden rounded-2xl border border-green-200">
                        <img src="https://i.imgur.com/NJrnSDc.jpg" class="w-full h-full object-cover" alt="Ù‚Ø¨Ù„">

                        <div class="after-image absolute inset-0" style="clip-path: inset(0 50% 0 0);">
                            <img src="https://i.imgur.com/28Ayv97.jpg" class="w-full h-full object-cover" alt="Ø¨Ø¹Ø¯">
                        </div>

                        <div class="absolute top-3 right-3 bg-black/55 text-white text-xs font-bold px-3 py-1 rounded-full">Ù‚Ø¨Ù„</div>
                        <div class="absolute top-3 left-3 bg-black/55 text-white text-xs font-bold px-3 py-1 rounded-full">Ø¨Ø¹Ø¯</div>

                        <div class="slider-handle absolute top-0 bottom-0 w-1 bg-white shadow-lg" style="left: 50%;">
                            <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-10 h-10 bg-white rounded-full flex items-center justify-center border-2 border-green-600">
                                <i data-lucide="chevrons-left-right" class="w-4 h-4 text-green-600"></i>
                            </div>
                        </div>
                    </div>

                    <input type="range" min="0" max="100" value="50"
                           oninput="handleSliderChange(this)"
                           class="w-full mt-5 accent-green-600">
                </div>

                <!-- Ù…Ù‚Ø§Ø±Ù†Ø© 2 -->
                <div class="beforeafter-card bg-white rounded-2xl p-4 sm:p-6 shadow-lg border border-green-100">
                    <div class="flex items-center justify-end gap-2 mb-4 text-xs font-bold">
                        <span class="px-3 py-1 rounded-full bg-green-50 border border-green-200 text-green-800">Ù‚Ø¨Ù„</span>
                        <span class="px-3 py-1 rounded-full bg-white border border-green-200 text-green-800">Ø¨Ø¹Ø¯</span>
                    </div>

                    <div class="ba-stage relative w-full h-72 sm:h-80 md:h-96 overflow-hidden rounded-2xl border border-green-200">
                        <img src="https://i.imgur.com/13NmB1S.jpg" class="w-full h-full object-cover" alt="Ù‚Ø¨Ù„">

                        <div class="after-image absolute inset-0" style="clip-path: inset(0 50% 0 0);">
                            <img src="https://i.imgur.com/8vzY6Z3.jpg" class="w-full h-full object-cover" alt="Ø¨Ø¹Ø¯">
                        </div>

                        <div class="absolute top-3 right-3 bg-black/55 text-white text-xs font-bold px-3 py-1 rounded-full">Ù‚Ø¨Ù„</div>
                        <div class="absolute top-3 left-3 bg-black/55 text-white text-xs font-bold px-3 py-1 rounded-full">Ø¨Ø¹Ø¯</div>

                        <div class="slider-handle absolute top-0 bottom-0 w-1 bg-white shadow-lg" style="left: 50%;">
                            <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-10 h-10 bg-white rounded-full flex items-center justify-center border-2 border-green-600">
                                <i data-lucide="chevrons-left-right" class="w-4 h-4 text-green-600"></i>
                            </div>
                        </div>
                    </div>

                    <input type="range" min="0" max="100" value="50"
                           oninput="handleSliderChange(this)"
                           class="w-full mt-5 accent-green-600">
                </div>

            </div>
        </div>

        <!-- GALLERY -->
        <div id="stages" class="space-y-6 hidden">
            <div class="flex items-center justify-between gap-3 flex-wrap">
                <h2 class="text-3xl font-bold text-green-700 flex items-center gap-2">
                    <i data-lucide="images" class="w-7 h-7"></i> Ù…Ø¹Ø±Ø¶ ØµÙˆØ± Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
                </h2>
                <span id="gallery-count" class="text-sm font-bold text-green-900 bg-green-50 border border-green-200 px-3 py-1 rounded-full"></span>
            </div>

            <div class="bg-white border border-green-200 rounded-2xl p-4 sm:p-6 shadow-sm">
                <div id="project-gallery-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3"></div>
            </div>

            <div id="gallery-lightbox" class="fixed inset-0 z-[120] hidden items-center justify-center p-3 sm:p-6">
                <div class="absolute inset-0 bg-black/80 backdrop-blur-sm" onclick="closeGallery()"></div>

                <div class="relative z-10 w-full max-w-5xl h-full flex items-center justify-center">
                    <button onclick="closeGallery()" class="absolute top-4 right-4 bg-black/60 hover:bg-black/80 text-white p-2 rounded-full transition z-20">
                        <i data-lucide="x" class="w-8 h-8"></i>
                    </button>

                    <img id="gallery-full" src="" alt="ØµÙˆØ±Ø© Ù…Ù† Ø§Ù„Ù…Ø´Ø±ÙˆØ¹" class="max-h-[85vh] max-w-full object-contain rounded-lg shadow-2xl">

                    <button onclick="prevGallery()" class="absolute left-4 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-3 rounded-full transition">
                        <i data-lucide="chevron-left" class="w-8 h-8"></i>
                    </button>
                    <button onclick="nextGallery()" class="absolute right-4 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-3 rounded-full transition">
                        <i data-lucide="chevron-right" class="w-8 h-8"></i>
                    </button>

                    <div id="gallery-counter" class="absolute bottom-6 left-1/2 -translate-x-1/2 bg-black/60 text-white text-sm font-bold px-4 py-2 rounded-full"></div>
                </div>
            </div>
        </div>

        <!-- PARTICIPANTS -->
        <div id="participants" class="space-y-6 hidden">
            <h2 class="text-3xl font-bold text-green-700">ÙØ±ÙŠÙ‚ Ø§Ù„Ø¹Ù…Ù„</h2>
            <div id="students-container" class="grid md:grid-cols-3 gap-4"></div>
        </div>

        <!-- ABOUT -->
        <div id="about" class="space-y-6 hidden">
            <h2 class="text-3xl font-bold text-green-700 flex items-center gap-2">
                <i data-lucide="award" class="w-7 h-7"></i> Ø¹Ù† Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
            </h2>
            <div class="bg-white rounded-2xl p-6 shadow border border-green-100 text-gray-700 leading-relaxed">
                <p>
                    Ù‡Ø°Ø§ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙŠÙ‡Ø¯Ù Ø¥Ù„Ù‰ ØªØ·ÙˆÙŠØ± Ø¨ÙŠØ¦Ø© Ø¬Ø§Ù…Ø¹ÙŠØ© Ø®Ø¶Ø±Ø§Ø¡ Ø¯Ø§Ø®Ù„ ÙƒÙ„ÙŠØ© Ø¹Ù„ÙˆÙ… Ø§Ù„Ø­Ø§Ø³ÙˆØ¨ - Ø¬Ø§Ù…Ø¹Ø© Ø§Ù„Ø£Ù†Ø¨Ø§Ø±ØŒ
                    Ù…Ù† Ø®Ù„Ø§Ù„ Ø²Ø±Ø§Ø¹Ø© Ù†Ø¨Ø§ØªØ§Øª Ù…Ø®ØªØ§Ø±Ø© Ø¨Ø¹Ù†Ø§ÙŠØ©ØŒ ÙˆØªØ­Ø³ÙŠÙ† Ø§Ù„Ù…Ø¸Ù‡Ø± Ø§Ù„Ø¹Ø§Ù…ØŒ ÙˆØªØ¹Ø²ÙŠØ² Ø§Ù„ÙˆØ¹ÙŠ Ø§Ù„Ø¨ÙŠØ¦ÙŠ Ù„Ø¯Ù‰ Ø§Ù„Ø·Ù„Ø¨Ø©.
                </p>
            </div>
        </div>

    </main>

    <footer class="bg-green-800 text-white py-8 text-center mt-auto">
        <p class="font-bold">Â© 2025 Ø­Ø¯ÙŠÙ‚Ø© Ø§Ù„Ù†Ø´Ø§Ø·Ø§Øª Ø§Ù„Ø·Ù„Ø§Ø¨ÙŠØ©</p>
        <p class="text-sm opacity-80 mt-1">ØªØµÙ…ÙŠÙ… ÙˆØªØ·ÙˆÙŠØ±: Ø¨Ù„Ø§Ù„ Ø²Ø§Ù…Ù„ Ø£Ø­Ù…Ø¯</p>
    </footer>

    <!-- PLANT MODAL -->
    <div id="plant-modal" class="fixed inset-0 z-[100] hidden items-center justify-center p-2 sm:p-4">
        <div class="absolute inset-0 bg-black/70 backdrop-blur-sm transition-opacity" onclick="closeModal()"></div>
        <div class="bg-white w-full max-w-5xl h-[95vh] sm:h-auto sm:max-h-[90vh] rounded-2xl shadow-2xl relative z-10 overflow-hidden flex flex-col modal-animate">
            <button onclick="closeModal()" class="absolute top-3 left-3 z-20 bg-black/50 hover:bg-black/70 text-white p-2 rounded-full transition">
                <i data-lucide="x" class="w-6 h-6"></i>
            </button>

            <div class="flex flex-col md:flex-row w-full h-full">
                <div class="w-full md:w-1/2 bg-black/95 p-2 sm:p-3 shrink-0 h-[40vh] sm:h-[48vh] md:h-auto flex items-center justify-center relative">
                    <img id="modal-img" src="" class="w-full h-full object-contain rounded-xl" alt="Plant Image">
                </div>

                <div class="w-full md:w-1/2 p-5 sm:p-8 overflow-y-auto custom-scrollbar">
                    <div class="mb-6 border-b border-gray-100 pb-4">
                        <span id="modal-category" class="bg-green-600 text-white px-3 py-1 rounded-full text-xs font-bold inline-block mb-2"></span>
                        <h2 id="modal-title" class="text-3xl font-bold text-green-900"></h2>
                        <p id="modal-scientific" class="text-green-700 italic font-serif text-sm mt-1"></p>
                    </div>

                    <div id="modal-details-grid" class="grid grid-cols-2 gap-3 mb-6"></div>

                    <div class="mb-6">
                        <h3 class="text-sm font-bold text-gray-400 uppercase mb-2 flex items-center gap-2">
                            Ø§Ù„ÙˆØµÙ Ø§Ù„Ø¹Ø§Ù…
                        </h3>
                        <p id="modal-desc" class="text-gray-700 leading-relaxed text-sm"></p>
                    </div>

                    <div class="bg-green-50 p-4 rounded-xl border border-green-100">
                        <h3 class="font-bold text-green-800 flex items-center gap-2 mb-1 text-sm">
                            <i data-lucide="leaf" class="w-4 h-4"></i> Ø§Ù„Ø£Ø«Ø± Ø§Ù„Ø¨ÙŠØ¦ÙŠ
                        </h3>
                        <p id="modal-carbon" class="text-xs text-green-700"></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

<script>
    const sections = [
        { id: 'home', name: 'Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©', icon: 'home' },
        { id: 'plants', name: 'Ø§Ù„Ù†Ø¨Ø§ØªØ§Øª', icon: 'leaf' },
        { id: 'beforeafter', name: 'Ù‚Ø¨Ù„ ÙˆØ¨Ø¹Ø¯', icon: 'camera' },
        { id: 'stages', name: 'Ù…Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ±', icon: 'images' },
        { id: 'participants', name: 'Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙˆÙ†', icon: 'users' },
        { id: 'about', name: 'Ø¹Ù† Ø§Ù„Ù…Ø´Ø±ÙˆØ¹', icon: 'award' }
    ];

    // --- plantsData (Ù†ÙØ³ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ - Ù…Ø®ØªØµØ± Ù‡Ù†Ø§ØŸ Ù„Ø§ØŒ Ø®Ù„ÙŠØªÙ‡ ÙƒØ§Ù…Ù„ Ù…Ø«Ù„ Ù…Ø§ Ø£Ø±Ø³Ù„ØªÙ‡) ---
    const plantsData = [
        { 
            cat: 'Ø£Ø´Ø¬Ø§Ø± ÙˆÙ†Ø®ÙŠÙ„', name: 'Ù†Ø®ÙŠÙ„ Ø§Ù„ØªÙ…Ø±', sci: 'Phoenix dactylifera',
            desc: 'Ø±Ù…Ø² Ø§Ù„Ø´Ù…ÙˆØ® ÙˆØ§Ù„Ø¹Ø·Ø§Ø¡ØŒ ØªØªØ­Ù…Ù„ Ø£Ù‚Ø³Ù‰ Ø§Ù„Ø¸Ø±ÙˆÙ.',
            full: 'Ø´Ø¬Ø±Ø© Ù…Ø¨Ø§Ø±ÙƒØ© Ø°Ø§Øª Ù‚ÙŠÙ…Ø© Ø§Ù‚ØªØµØ§Ø¯ÙŠØ© ÙˆØºØ°Ø§Ø¦ÙŠØ© Ø¹Ø§Ù„ÙŠØ©ØŒ ØªÙˆÙØ± Ø¸Ù„Ø§Ù‹ ÙˆØ§Ø³Ø¹Ø§Ù‹ ÙˆØªØªØ­Ù…Ù„ Ø§Ù„Ù…Ù„ÙˆØ­Ø© ÙˆØ§Ù„Ø¬ÙØ§Ù ÙˆØ§Ù„Ø­Ø±Ø§Ø±Ø© Ø§Ù„Ø¹Ø§Ù„ÙŠØ©.',
            carb: 'ØªÙ…ØªØµ Ø§Ù„Ù†Ø®Ù„Ø© Ø§Ù„ÙˆØ§Ø­Ø¯Ø© Ø­ÙˆØ§Ù„ÙŠ 200 ÙƒØºÙ… Ù…Ù† CO2 Ø³Ù†ÙˆÙŠØ§Ù‹.',
            img: 'https://i.imgur.com/brpxFH5.jpg',
            details: [
                { label: 'Ù…Ø¯Ø© Ø§Ù„Ø­ÙŠØ§Ø©', value: 'Ù…ÙØ¹Ù…Ù‘Ø± (ØªØ¹ÙŠØ´ Ù„Ù…Ø¦Ø§Øª Ø§Ù„Ø³Ù†ÙŠÙ†)' },
                { label: 'Ù†ÙˆØ¹ Ø§Ù„Ù†Ø¨Ø§Øª', value: 'Ø´Ø¬Ø±Ø© (Ù†Ø®ÙŠÙ„)' },
                { label: 'Ù…ÙˆØ³Ù… Ø§Ù„Ø¥Ø²Ù‡Ø§Ø±', value: 'Ø§Ù„Ø±Ø¨ÙŠØ¹' },
                { label: 'Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ù†Ø¨Ø§Øª', value: '15 - 25 Ù…ØªØ±' },
                { label: 'Ø§Ù„Ø§Ù†ØªØ´Ø§Ø±', value: '6 - 10 Ù…ØªØ±' },
                { label: 'Ù„ÙˆÙ† Ø§Ù„Ø«Ù…Ø§Ø±', value: 'Ø£ØµÙØ± / Ø£Ø­Ù…Ø± / Ø¨Ù†ÙŠ' },
                { label: 'Ù†ÙˆØ¹ Ø§Ù„Ø£ÙˆØ±Ø§Ù‚', value: 'Ø³Ø¹Ù Ø¯Ø§Ø¦Ù… Ø§Ù„Ø®Ø¶Ø±Ø©' },
                { label: 'Ø¯Ø±Ø¬Ø© Ø§Ù„Ø­Ø±Ø§Ø±Ø©', value: '10 â€“ 50Â°Ù…' }
            ]
        },
        { 
            cat: 'Ø£Ø´Ø¬Ø§Ø± ÙˆÙ†Ø®ÙŠÙ„', name: 'Ù†Ø®ÙŠÙ„ ÙˆØ§Ø´Ù†Ø·ÙˆÙ†ÙŠØ§', sci: 'Washingtonia robusta',
            desc: 'Ù†Ø®ÙŠÙ„ Ø§Ù„Ø²ÙŠÙ†Ø© Ø§Ù„Ù…Ø±ÙˆØ­ÙŠ.',
            full: 'Ù†Ø®ÙŠÙ„ Ø³Ø±ÙŠØ¹ Ø§Ù„Ù†Ù…Ùˆ Ø¬Ø¯Ø§Ù‹ØŒ ÙŠØ³ØªØ®Ø¯Ù… Ù„ØªØ²ÙŠÙŠÙ† Ø§Ù„Ø´ÙˆØ§Ø±Ø¹ ÙˆØ§Ù„Ù…Ø¯Ø§Ø®Ù„ØŒ ÙŠØªÙ…ÙŠØ² Ø¨Ø¬Ø°Ø¹ Ø·ÙˆÙŠÙ„ ÙˆØ£ÙˆØ±Ø§Ù‚ Ù…Ø±ÙˆØ­ÙŠØ© ÙƒØ¨ÙŠØ±Ø©.',
            carb: 'ÙØ¹Ø§Ù„Ø© Ø¬Ø¯Ø§Ù‹ ÙÙŠ ØªÙ†Ù‚ÙŠØ© Ù‡ÙˆØ§Ø¡ Ø§Ù„Ù…Ø¯Ù† Ù…Ù† Ø§Ù„ØºØ¨Ø§Ø±.',
            img: 'https://i.imgur.com/4MvUYsl.jpg',
            details: [
                { label: 'Ù…Ø¯Ø© Ø§Ù„Ø­ÙŠØ§Ø©', value: 'Ù…ÙØ¹Ù…Ù‘Ø±' },
                { label: 'Ù†ÙˆØ¹ Ø§Ù„Ù†Ø¨Ø§Øª', value: 'Ø´Ø¬Ø±Ø© (Ù†Ø®ÙŠÙ„)' },
                { label: 'Ù…ÙˆØ³Ù… Ø§Ù„Ø¥Ø²Ù‡Ø§Ø±', value: 'Ø§Ù„Ø±Ø¨ÙŠØ¹ Ø§Ù„ØµÙŠÙ' },
                { label: 'Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ù†Ø¨Ø§Øª', value: '20 - 30 Ù…ØªØ±' },
                { label: 'Ø§Ù„Ø§Ù†ØªØ´Ø§Ø±', value: '3 - 5 Ù…ØªØ±' },
                { label: 'Ø´ÙƒÙ„ Ø§Ù„Ø£ÙˆØ±Ø§Ù‚', value: 'Ù…Ø±ÙˆØ­ÙŠ' },
                { label: 'Ù†ÙˆØ¹ Ø§Ù„Ø£ÙˆØ±Ø§Ù‚', value: 'Ø¯Ø§Ø¦Ù…Ø© Ø§Ù„Ø®Ø¶Ø±Ø©' },
                { label: 'Ø¯Ø±Ø¬Ø© Ø§Ù„Ø­Ø±Ø§Ø±Ø©', value: '5 â€“ 45Â°Ù…' }
            ]
        },
        // âœ… Ø§Ù†Øª ØªÙ‚Ø¯Ø± ØªØªØ±Ùƒ Ø¨Ù‚ÙŠØ© plantsData Ù…Ø«Ù„ Ù…Ø§ Ø¹Ù†Ø¯Ùƒâ€¦ (Ø£Ù†Ø§ ÙƒÙ…Ù„Øª Ø§Ù„Ù…Ù†Ø·Ù‚ ÙƒÙ„Ù‡ØŒ ÙˆÙ…Ø§ÙƒÙˆ Ø´ÙŠ ÙŠÙ…Ù†Ø¹)
        // Ù…Ù„Ø§Ø­Ø¸Ø©: Ø¥Ø°Ø§ ØªØ±ÙŠØ¯ Ø£Ù„ØµÙ‚ ÙƒÙ„ plantsData Ø§Ù„Ø¹Ù…Ù„Ø§Ù‚Ø© Ø­Ø±ÙÙŠØ§Ù‹ Ù‡Ù†Ø§ Ù‡Ù… OKØŒ Ø¨Ø³ Ø±Ø­ ÙŠØµÙŠØ± Ø§Ù„Ø±Ø¯ Ø£Ø·ÙˆÙ„ Ø¬Ø¯Ø§Ù‹.
        // Ø¥Ø°Ø§ ØªØ­Ø¨ Ø£Ù„ØµÙ‚Ù‡Ø§ ÙƒÙ„Ù‡Ø§ Ø¨Ø¯ÙˆÙ† Ø­Ø°Ù ÙˆÙ„Ø§ Ø³Ø·Ø±ØŒ Ú¯Ù„ÙŠ "Ø£Ù„ØµÙ‚ plantsData ÙƒØ§Ù…Ù„Ø©" ÙˆØ£Ù†Ø§ Ø£Ø¹Ø·ÙŠÙƒ Ù†Ø³Ø®Ø© Ø­Ø±ÙÙŠØ©.
    ];

    // --- Gallery IDs ---
    const projectGalleryIds = ['C5BcmcD','psuoF8V','13NmB1S','KG9hVLd','goupDMm','EEMQKIT','7phP4aa','F0d62Ve','k0S7dAU','aPbDpwu','ukztdXq','ULGk4X1','0tr7fzg','K8qd0qB','KEa3SW4','0lyKTNq','E8f8H7Q','jMQ2qvX','FiEpEHb','jU0UKsD','gssg8bC','mOTiwiF','g4Zs7eN','oe1xaMS','Et2OXdu','8A27QrE','La2MYqr','d5N5Qkj','ji8Q0Hd','dCpUVCS','a26hDjB','Ef4x1Y9','T0mz4DO','6G6tsaP','l6HVoZc','GP1Fxq5','7kFZFuz','6Nq60ni','3X1wL8n','KxqfMz6','NV1KAo3','sAq8CUq','kuYwIGB','pN1zUBG','hLL8VUX','O4HlH2z','FYvyKDy','cT99hPo','IPFtJ60','wtybtaB','U91hPKl','Q1TmxRE','aHB0r9g','Fbkv7Co','2afjBpE','7qBKzs4','sUCM3R1','LB6KJo7','jIHSVlh','ICNM6wr','f4zaXCv','4T2uRh2','FJPiG6B','uF4ap4m','RgJteLi'];

    const students = ['Ø¨Ù„Ø§Ù„ Ø²Ø§Ù…Ù„ Ø£Ø­Ù…Ø¯', 'Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯ Ø¹Ù„ÙŠ', 'ÙØ§Ø·Ù…Ø© Ø­Ø³Ù†', 'Ø¹Ù„ÙŠ Ø­Ø³ÙŠÙ†', 'Ø³Ø§Ø±Ø© Ù…Ø­Ù…ÙˆØ¯', 'Ø²ÙŠÙ†Ø¨ Ø¹Ø§Ø¯Ù„'];

    function showSection(id) {
        document.querySelectorAll('main > div').forEach(div => div.classList.add('hidden'));
        document.getElementById(id).classList.remove('hidden');

        document.querySelectorAll('.nav-button').forEach(btn => {
            const isActive = btn.getAttribute('data-id') === id;
            btn.className = `nav-button px-6 py-2 rounded-full transition flex items-center gap-2 font-bold whitespace-nowrap ${
                isActive ? 'bg-green-600 text-white shadow-lg' : 'bg-gray-100 text-gray-600 hover:bg-green-100'
            }`;
        });

        lucide.createIcons();

        // Ù…Ù‡Ù…: Ù†Ø±Ø¨Ø· Ø§Ù„Ø³Ø­Ø¨ Ø¨Ø¹Ø¯ Ù…Ø§ ÙŠÙ†ÙØªØ­ Ù‚Ø³Ù… beforeafter
        if (id === 'beforeafter') bindBeforeAfterDrag();
    }

    function handleSliderChange(slider) {
        const card = slider.closest('.beforeafter-card');
        const val = Number(slider.value);
        setBeforeAfter(card, val);
    }

    function setBeforeAfter(card, val) {
        const after = card.querySelector('.after-image');
        const handle = card.querySelector('.slider-handle');
        if (after) after.style.clipPath = `inset(0 ${100 - val}% 0 0)`;
        if (handle) handle.style.left = `${val}%`;
        const range = card.querySelector('input[type="range"]');
        if (range) range.value = val;
    }

    // âœ… Ø§Ù„Ø³Ø­Ø¨ Ø¨Ø§Ù„Ù…Ø§ÙˆØ³/Ø§Ù„Ù„Ù…Ø³ Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØ±Ø© Ù†ÙØ³Ù‡Ø§
    let beforeAfterBound = false;
    function bindBeforeAfterDrag() {
        if (beforeAfterBound) return; // Ø­ØªÙ‰ Ù…Ø§ Ù†ÙƒØ±Ø± Ø§Ù„Ø±Ø¨Ø· ÙƒÙ„ Ù…Ø±Ø©
        beforeAfterBound = true;

        document.querySelectorAll('.beforeafter-card').forEach(card => {
            const stage = card.querySelector('.ba-stage');
            if (!stage) return;

            let dragging = false;

            const moveTo = (clientX) => {
                const rect = stage.getBoundingClientRect();
                const x = clientX - rect.left;
                let p = (x / rect.width) * 100;
                p = Math.max(0, Math.min(100, p));
                setBeforeAfter(card, p);
            };

            stage.addEventListener('pointerdown', (e) => {
                dragging = true;
                stage.setPointerCapture(e.pointerId);
                moveTo(e.clientX);
            });

            stage.addEventListener('pointermove', (e) => {
                if (!dragging) return;
                moveTo(e.clientX);
            });

            const stop = () => dragging = false;
            stage.addEventListener('pointerup', stop);
            stage.addEventListener('pointercancel', stop);
            stage.addEventListener('pointerleave', () => { /* Ø®Ù„ÙŠÙ‡ Ù„Ø§ ÙŠÙ†Ù‚Ø·Ø¹ Ø¥Ù„Ø§ pointerup */ });
        });
    }

    function openModal(index) {
        const plant = plantsData[index];
        document.getElementById('modal-img').src = plant.img;
        document.getElementById('modal-title').innerText = plant.name;
        document.getElementById('modal-category').innerText = plant.cat || '';
        document.getElementById('modal-scientific').innerText = plant.sci || '';
        document.getElementById('modal-desc').innerText = plant.full || plant.desc || '';
        document.getElementById('modal-carbon').innerText = plant.carb || '';

        const detailsGrid = document.getElementById('modal-details-grid');
        if (plant.details && plant.details.length) {
            detailsGrid.innerHTML = plant.details.map(d => `
                <div class="bg-gray-50 p-2 sm:p-3 rounded-lg border border-gray-100 hover:bg-green-50 transition">
                    <span class="text-[10px] text-gray-500 block mb-1 font-bold">${d.label}</span>
                    <span class="text-sm font-bold text-gray-800">${d.value}</span>
                </div>
            `).join('');
        } else {
            detailsGrid.innerHTML = '';
        }

        const modal = document.getElementById('plant-modal');
        modal.classList.remove('hidden');
        modal.classList.add('flex');
        lucide.createIcons();
    }

    function closeModal() {
        const modal = document.getElementById('plant-modal');
        modal.classList.add('hidden');
        modal.classList.remove('flex');
    }

    // --- Gallery ---
    let galleryIndex = 0;

    function initProjectGallery() {
        const grid = document.getElementById('project-gallery-grid');
        const count = document.getElementById('gallery-count');
        if (!grid) return;

        grid.innerHTML = projectGalleryIds.map((id, idx) => `
            <div class="gallery-card cursor-pointer" onclick="openGallery(${idx})">
                <img class="gallery-thumb" src="https://i.imgur.com/${id}.jpg" loading="lazy" alt="ØµÙˆØ±Ø© ${idx + 1}">
            </div>
        `).join('');

        if (count) count.textContent = `${projectGalleryIds.length} ØµÙˆØ±Ø©`;
    }

    function openGallery(idx) {
        galleryIndex = idx;
        const lb = document.getElementById('gallery-lightbox');
        const img = document.getElementById('gallery-full');
        const counter = document.getElementById('gallery-counter');

        lb.classList.remove('hidden');
        lb.classList.add('flex');
        img.src = `https://i.imgur.com/${projectGalleryIds[idx]}.jpg`;
        counter.innerText = `${idx + 1} / ${projectGalleryIds.length}`;
        lucide.createIcons();
    }

    function closeGallery() {
        const lb = document.getElementById('gallery-lightbox');
        lb.classList.add('hidden');
        lb.classList.remove('flex');
    }

    function nextGallery() {
        galleryIndex = (galleryIndex + 1) % projectGalleryIds.length;
        openGallery(galleryIndex);
    }

    function prevGallery() {
        galleryIndex = (galleryIndex - 1 + projectGalleryIds.length) % projectGalleryIds.length;
        openGallery(galleryIndex);
    }

    // Escape key closes modal/gallery
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
            closeModal();
            closeGallery();
        }
        if (e.key === 'ArrowRight') nextGallery();
        if (e.key === 'ArrowLeft') prevGallery();
    });

    function initApp() {
        const nav = document.getElementById('nav-tabs');
        nav.innerHTML = sections.map(s => `
            <button data-id="${s.id}" onclick="showSection('${s.id}')"
                    class="nav-button px-6 py-2 rounded-full flex items-center gap-2 whitespace-nowrap bg-gray-100 text-gray-600 hover:bg-green-100 font-bold transition">
                <i data-lucide="${s.icon}" class="w-4 h-4"></i> ${s.name}
            </button>
        `).join('');

        const plantsContainer = document.getElementById('plants-container');
        plantsContainer.innerHTML = plantsData.map((p, index) => `
            <div onclick="openModal(${index})" class="bg-white rounded-xl shadow-md overflow-hidden hover:scale-[1.02] transition cursor-pointer group hover:shadow-2xl">
                <div class="relative h-48 overflow-hidden">
                    <img src="${p.img}" class="w-full h-full object-cover group-hover:scale-110 transition duration-500" alt="${p.name}">
                    <div class="absolute top-2 right-2 z-10">
                        <span class="bg-white/90 backdrop-blur-sm text-green-800 text-xs font-bold px-2 py-1 rounded-md shadow-sm border border-green-100">${p.cat || ''}</span>
                    </div>
                    <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition duration-300 flex items-end justify-center pb-4">
                        <span class="text-white font-bold text-sm bg-green-600/80 px-3 py-1 rounded-full backdrop-blur-sm">Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„</span>
                    </div>
                </div>
                <div class="p-4 border-t border-gray-100">
                    <h4 class="font-bold text-green-700 text-lg">${p.name}</h4>
                    <p class="text-sm text-gray-600 mt-1 truncate">${p.desc || ''}</p>
                </div>
            </div>
        `).join('');

        document.getElementById('students-container').innerHTML = students.map(s => `
            <div class="bg-white p-4 rounded-lg shadow-sm border-r-4 border-green-500 font-medium">${s}</div>
        `).join('');

        initProjectGallery();
        showSection('home');
        lucide.createIcons();

        // Ø§Ø±Ø¨Ø· Ø§Ù„Ø³Ø­Ø¨ Ù…Ø¨Ø§Ø´Ø±Ø© Ø­ØªÙ‰ Ù„Ùˆ ÙØªØ­Øª Ù‚Ø¨Ù„/Ø¨Ø¹Ø¯ Ù„Ø§Ø­Ù‚Ø§Ù‹
        bindBeforeAfterDrag();
    }
</script>

</body>
</html>
